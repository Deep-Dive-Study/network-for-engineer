# 1장

## 네트워크 구성도

홈 네트워크 구성

모뎀 - 공유기 - 단말 간 물리적인 **연결**이 필요하다. (케이블, 공기, 랜선 등)

데이터 센터 네트워크

과거에는 3계층을 사용해 **상하**로 트래픽을 분산했던 반면 현재는 2계층 디자인(스파인-리프)을 사용해 **좌우**로 트래픽을 분산한다.

## 프로토콜

통신 규약을 프로토콜이라 한다.

과거에는 통신규약이 여러가지로 산재되어 있었다. 
→ 현재는 이더넷-TCP/IP 기반으로 변경되고 있다.

이더넷은 전송 매체, 신호 규약, 회선 규격등 물리적인 프로토콜이고,
TCP/IP는 통신을 위한 프로토콜 규격으로 쓰인다.

과거는 열악한 환경에 의해 굉장히 까다로운 비트기반 통신이었으나, 현재는 HTTP나 SMTP같은 문자형 프로토콜이 대표적이다.

**TCP/IP 프로토콜 스택**

- 이더넷 - 물리 파트
- 네트워크 계층 - 데이터가 목적지를 찾아가도록 도와줌
- 전송 계층 - 잘린 패킷을 데이터 형태로 조합 해줌
- 애플리케이션 계층 - 전송과 동일

## OSI 7 계층

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/85796588/5c32433c-6b28-4fd5-ad8c-bee096d41c3c)

여기서 두개의 계층으로 다시 나눌 수 있다.

- 1~4 계층을 데이터 플로 계층
    - 데이터를 상대방에게 잘 전달하는 역할.
    - 개발자가 고려하지 않는 영역

- 5~7 계층을 애플리케이션 계층
    - 개발자가 고려해야 하는 영역
    

OSI 7계층과 다르게 TCP/IP 프로토콜은 이론보다 **실용성**에 중점을 두었다.

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/85796588/6458220c-4a26-4147-b08a-244f8fee8260)

## OSI 계층별 설명

1. Physical
물리적 연결과 관련된 정보로 **전기신호를 전송**한다. (허브, 리피터, 케이블, 커넥터 등)

2. DataLink
전기신호를 우리가 알아볼 수 있는 형태로 처리한다.(랜카드, 스위치)
주소 정보를 정의하고, **정확한 주소(MAC주소)와 통신**하는데 초점이 맞춰져있다.(상대방이 받을 수 있는지 확인한다.)
데이터에 대한 **에러 탐지/수정** 역할(이더넷 기반에선 탐지만)

랜카드에는 고유한 MAC주소가 있는데 입력되는 전기신호를 데이터로 바꾸고, MAC주소를 확인한 뒤 자신에게 돌아오는 전기신호를 확인한다. 통과하면 메모리에 적재

스위치는 단말의 MAC주소와 포트번호를 습득한다. 이 데이터를 기반으로 포트를 필터링하고, 포워딩한다. 스위치의 발전과 함께 이더넷 기반 네트워크는 급증했다.

3. Network
IP(네트워크 주소 + 호스트 주소)와 같은 논리적인 주소 정의.
네트워크 주소를 이용해 원격지 네트워크 **최적의 경로**를 지정한다.(라우터)

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/85796588/8a721eb0-7432-412f-a8ff-63e6b24f2183)

4. Transport
데이터들이 정상적으로 **잘보내지는지 확인**하는 역할.(로드밸런서, 방화벽)
패킷이 유실되거나, 순서가 바뀌는 경우를 바로잡아준다.
보내는 순서는 시퀀스, 받는 순서는 ACK이라 하고, 포트번호를 사용해 상위 애플리케이션을 구분한다. 이 정보를 이용해 **부하를 분산**하거나, **보안정책을 수립**한다.

5. Session
양 끝단의 응용프로세스가 **연결**을 성립, 안정적으로 **유지**, 작업 후 연결 **종료.**
세션을 관리하는 것이 주요 역할. TCP/IP 세션을 만들고 책임진다.
에러에 대한 복구와 재전송 수행

6. Presentation
표현 방식이 다른 애플리켕이션 또는 시스템간의 통신을 위해 **통일된 구문으로 변환**한다. (MIME인코딩, 암호화, 압축, 코드변환등)

7. Application
애플리케이션 프로세스를 정의하고, **서비스 수행.**(FTP, SMTP, HTTP, TELNET등)
****소프트웨어 ****UI 또는 사용자 입출력을 정의한다.

**계층별 주요 프로토콜 및 장비**

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/85796588/855ee5c5-68ac-43e5-a63b-4b3d7935bcef)

## 인캡슐레이션 디캡슐레이션

상위에서 하위 계층으로 보낼때 전기신호로 보내는 것 → 인캡슐레이션

하위에서 항위 계층으로 보낼때 데이터를 보내는 것 → 디캡슐레이션

현대 네트워크는 대부분 패킷 기반이다. 패킷은 데이터를 작은 단위로 쪼개 보내는 것을 뜻하는데, 한 회선을 점유하지 않고, 동시에 여러 단말이 통신하게 해준다.

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/85796588/23f91150-4bf5-4199-a170-7cf114adbab9)

애플리케이션에서 데이터플로 계층으로 내리면서 패킷 단위로 분할하는데 이를 인캡슐레이션이라 한다. 적절한 크기로 데이터를 쪼개고 헤더를 비트단위로 추가한다.

받은 전기신호를 상위 계층으로 올려보내며 헤더를 벗겨낸다. 이때 목적지가 자신이 아니라면 그 패킷은 버려진다. 이렇게 패킷을 벗기고 데이터를 애플리케이션에 올려 보내는 과정을 디캡슐레이션이라 한다.

다음은 각 계층에서 넣는 헤더에 대한 정보다.

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/85796588/c8fef8ac-35c5-4556-aa8d-e91dd339b12a)

복잡해 보이지만, 모든 헤더에 현재 계층에서 정의하는 정보, 상위 프로토콜 지시자는 꼭 포함된다.

* MSS : 네트워크가 수용할 수 있도록 4계층에서 쪼개지는 데이터의 적절한 크기(보통 1460바이트)

* MTU : 한번에 보낼 수 있는 데이터의 크기(보통 1500바이트)
