# 1장 네트워크 시작하기

#### 네트워크란?

- 컴퓨터나 기타 기기들이 리소스를 공유하거나 데이터를 주고 받기 위해 유선 혹은 무선으로 연결된 통신 체계

## 1.1 네트워크 구성도 살펴보기

### 1.1.1 홈 네트워크

- 구성
    - 인터넷, 모뎀, 공유기, 단말기
    
    - `무선 연결` → 무선 랜 카드, 매체(공기)
    
    - `유선 연결` → 이더넷 랜 카드, 랜 케이블

### 1.1.2 데이터 센터 네트워크

- 안정적이고 빠른 대용량 서비스를 제공하는 것이 목표

- 이중화 기술, 고속 이더넷 기술(40G, 100G, 400G) 사용

- 기존 3계층 → 최근에 2계층 구성(스파인-리프)

    - 서버간 통신이 늘어나는 최근 트래픽 경향을 지원하기 위해 제안됨
    
    - TOR 스위치, 스파인 스위치
    
    - 참고: https://white-polarbear.tistory.com/101

## 1.2 프로토콜

- 네트워크 통신에 필요한 규칙, 규약 ⇒ 네트워크 프로토콜

- 최근 TCP/IP 기반의 프로토콜 변경되는 추세(사실상 표준)

    - `물리적 측면`: 데이터 전송 매체, 신호 규약, 회선 규격, 등 이더넷이 널리 사용된다.
    
    - `논리적 측면`: 장치들끼리 통신하기 위한 프로토콜 규격, TCP/IP가 널리 사용된다.
  
- 옛날에는 지금보다 환경이 열악하여 최대한 적은 데이터를 활용해 효율적인 통신을 해야했다.

    - 대부분 2진수(비트) 기반의 프로토콜
    
    - 문자 기반의 프로토콜 → 효율성은 낮아도 다양한 확장이 가능함
        - Ex) HTTP, SMTP
      
- 프로토콜 묶음 → 프로토콜 스택

## 1.3 OSI 7 계층과 TCP/IP

![스크린샷 2023-06-08 오후 1 29 56](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/aaf353d0-27af-47e5-b356-deaa9836b44b)

### 1.3.1 OSI 7 계층과 TCP/IP

- `OSI 7 계층`: 네트워크를 통신하기 위한 표준 모델

- 계층별로 프로토콜을 개발해 네트워크 구성 요소들을 모듈화할 수 있게 되었다.

- 모듈화된 요소는 기존에 개발된 프로토콜과 연동이 가능하다.

- 상위 프로토콜은 하위 프로토콜을 기반으로 동작한다.

- `1~4 계층` (하위 계층) : 데이터 플로 계층 - 데이터를 상대방에게 잘 전달하는데 초점

- `5~7 계층` (상위 계층) : 애플리케이션 계층 - 데이터를 잘 표현하는데 초점

### 1.3.2 TCP/IP 프로토콜 스택

- 현대 네트워크는 대부분 `TCP/IP`와 `이더넷`으로 이루어져 있다.

- 인터넷에 특화된 네트워크 구조

    - 네트워크 엔지니어가 고려할 영역과 개발자가 고려해야할 부분이 잘 반영되었다.

## 1.4 OSI 7 계층별 이해하기

### 1.4.1 1계층 피지컬 계층

- 물리적 연결과 관련된 정보를 정의

- `1계층 장비`는 전기 신호를 그대로 잘 전달하는 것이 목적(신호 재생성)

    - 허브, 리피터, 케이블,커넥터, 트랜시버, 탭, 등이 있다.
    
    - 주소의 개념이 없기 때문에 신호가 들어온 포트를 제외하고 모든 포트에 전기 신호를 전송한다.

### 1.4.2 2계층 데이터 링크 계층

- 전기 신호를 모아 우리가 알아볼 수 있는 데이터의 형태로 처리

    - 주소 정보를 정의하고 정확한 주소로 통신이 되도록 하는 데 초점이 맞춰져 있다.
    
    - 주소 체계가 생기면서 여러 통신이 한꺼번에 이루어지는 것을 구분하기 위한 기능이 정의 되었다.
    
    - 데이터 에러 탐지 역할 수행
    
    - Flow Control 역할 (데이터 양 조절)
    
- `2계층 주요 장비`: NIC, 스위치

    - MAC 주소를 보고 통신할 포트를 지정해 내보낼 수 있다.
    
        - 데이터를 기반으로 단말들이 통신할 때 포트를 적절히 필터링하고 정확한 포트로 포워딩해준다.

예시)

![스크린샷 2023-06-08 오후 1 34 34](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/736b3dce-be18-46e1-943a-cf8b69c0617a)

> 📌 NIC 동작 방식
> 1. 전기 신호를 데이터 형태로 만든다.
> 2. 목적지 MAC과 출발지MAC 주소를 비교한다.
> 3. NIC의 주소를 확인한다.
> 4. 목적지 MAC 주소와 네트워크 인터페이스 카드가 갖고 있는 MAC 주소가 맞으면 데이터를 처리하고 다르면 데이터를 폐기한다.

#### 즉, 내가 처리해야하는 데이터가 맞는지 확인 후 맞는 경우 데이터 처리를 수행한다.


### 1.4.3 3계층 네트워크 계층

- IP 주소와 같은 논리적인 주소가 정의됨

    - 네트워크 주소 부분과 호스트 주소 부분으로 나뉜다.
    
- 사용자가 환경에 맞게 변경 가능

- `3계층 주요 장비` : 라우터

    - IP 주소를 사용해 최적의 경로를 찾아주고 해당 경로로 패킷을 전송하는 역할

#### 1~3 계층의 역할은 신호와 데이터를 올바른 위치로 보내고 실제 신호를 잘 만들어 보내는데 집중

### 1.4.4 4계층 트랜스포트 계층

- 실제로 해당 데이터들이 `정상적`으로 잘 보내지도록 확인하는 역할

    - 패킷이 유실되거나 순서가 바뀌었을 때 바로 잡아 주는 역할
    
    - 포트번호를 사용해 상위 어플리케이션을 구분
    
    - 여기까지 기능을 통칭해서 ‘Socket’ → OS에서 제공해주는 기능
    
- `4계층 주요 장비` : L4 로드밸런서, 방화벽

    - 포트번호, 시퀀스, ACK 번호 정보를 이용해 부하를 분산하거나 보안 정책을 수립해 패킷을 통과, 차단하는 기능 수행

### 1.4.5 5계층 세션 계층

- 연결을 성립하도록 도와주고 연결이 안정적으로 유지되도록 관리하고 작업 완료 후에는 해당 연결을 끊는 역할

    - TCP/IP 세션을 만들고 없애는 책임
    
    - 에러 복구와 재전송도 수행

### 1.4.6 프레젠테이션 계층

- 표현 방식이 다른 시스템 간의 통신을 돕기 위해 하나의 통일된 구문 형식으로 변환하는 기능

    - 암호화, 압축, 코드 변환, 인코딩, 등
    
    - 데이터의 형식상 차이를 다루는 부담을 줄여준다.

### 1.4.7 애플리케이션 계층

- 애플리케이션 프로세스를 정의하고 애플리케이션 서비스를 수행

    - 네트워크 소프트웨어의 UI, 사용자 입 출력 정의의 역할
    
    - HTTP, SMTP, TELNET, 등
    
    - L7 로드밸런서


## 1.5. 인캡슐레이션과 디캡슐레이션

- 인캡슐레이션과 디캡슐레이션은 데이터가 송신자로부터 수신자까지 전송되는 과정에서 데이터를 적절한 형태로 변환하고, 각 네트워크 계층에서 필요한 정보를 추가 및 제거한다.

    - 데이터를 분할하는 과정 → `인캡슐레이션`
    
    - 데이터를 결합하는 과정 → `디캡슐레이션`

- 네트워크에 전달되는 데이터의 단위 → `패킷` (IP 패킷과 다름)

    - 하나의 통신이 회선 전체를 점유하지 않고 동시에 여러 단말이 통신하기 위해서
    
    - 데이터를 패킷으로 쪼개고 목적지에서 결합해서 사용함

- 헤더 정보는 각 계층끼리 전달된다

    - 각 계층 헤더를 이용해 송신자 계층과 수신자 계층 간의 논리적 통신 과정
    
    - 헤더에 두가지 정보는 반드시 들어가야 한다.
    
        - 현재 계층에서 정의하는 정보
        
            - 각 계층에서의 목적에 맞는 정보 ex) TCP : SEQ, ACK / 출발 MAC, 도착 MAC
            
        - 상위 프로토콜 지시자
        
            - 각 계층별로 구분할 수 있는 지시자가 존재 포트 번호, 프로토콜 번호, 이더 타입
            
            - 어떤 상위 프로토콜로 올려보내 주어야 할지 알아야 함(한 계층 위의 정보)


### PDU 란?

![스크린샷 2023-06-08 오후 1 30 40](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/fea558ae-312d-49a8-86ea-7b06dc46088a)

- 각 계층에서 헤더와 데이터를 합친 부분

    - 계층별로 사용되는 데이터 단위

### MSS & MTU란?

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/19dc4f88-e820-4497-b133-1f70c3426ff8)

  - `MSS`(Maximum Segment Size)

      - TCP 세그먼트 내의 데이터 페이로드가 가질 수 있는 최대 바이트 크기

      - IP 헤더와 TCP 헤더를 포함하지 않는 데이터 부분만

      - 보통 1460 바이트 (IP 헤더와 TCP 헤더 각 20바이트 제외한 값)

  - `MTU`(Maximum Transmission Unit)

      - 네트워크에서 한 번에 보낼 수 있는 데이터 크기 → 패킷

      - 일반적으로 이더넷에서 수용 가능한 크기는 1500바이트

          - 2계층 헤더 제외 / 2계층의 데이터 값
    
---
참고하면 좋은 영상 : https://youtu.be/6l7xP7AnB64
