# 2장

## 2.1 네트워크 연결 구분

예전엔 각 사용되는 기술과 프로토콜이 달랐는데 현재는 LAN, MAN, WAN 모두 이더넷으로 통합되어 전송기술과 프로토콜의 구분은 사라졌다.

### LAN

홈, 사무실등 소규모 네트워크를 뜻한다. 근거리 통신이기 때문에 스위치와 같은 간단한 장비로 연결된 네트워크를 LAN이라고 한다. 여러 기술이 사용되었지만, **이더넷**으로 통합되었다.

관리 범위로 구분하자면 건물이나, 대지에 직접 구축해 동작하는 네트워크를 뜻한다. 최근에는 구분이 무의미하다.

### MAN

0 ~ 00 km 범위로 한 도시를 연결하는 개념이다.

네트워크를 구축할 때 통신사의 인프라를 사용하면 WAN, 자체 인프라를 사용하면 MAN으로 구분하기도 한다.

### WAN

먼 거리에 있는 네트워크를 연결하기 위해 사용된다. 멀리 떨어진 LAN을 연결하거나, 인터넷에 접속하기 위한 네트워크가 WAN에 속한다. WAN은 직접 구축하기 어렵기 때문에 대부분 통신사로부터 회선을 임대해서 사용한다.

## 2.2 네트워크 회선

원격지 네트워크에 연결하기 위해선 WAN을 사용하는데, WAN도 LAN과 동일하게 이더넷을 주로 사용한다. 
특별한 용도에선 이더넷이 아닌 다양한 기술을 사용하기도 한다.(음성 회선 기반 저속 회선 기술등)

### 인터넷 회선

인터넷 접속을 위해 통신사와 열결하는 회선을 뜻한다.

통신사와 케이블 연결만으로 인터넷이 가능하지 않고, 통신사가 판매하는 인터넷과 연결된 회선을 사용해야만 인터넷 접속이 가능하다.

인터넷을 연결한 회선은 인터넷을 연결하지 않은 회선보다 비용이 싸다.

일반 가정에서는 통신사와 직접 연결되는 구조가 아닌 내부 선로를 공유하는 구조이다. 이 방법은 사용자가 많아지면 속도를 보장하지 않는다. (광랜, FTTH, 동축케이블, xDSL)

### 전용 회선

가입자와 통신사간 대역폭을 보장해주는 서비스를 뜻한다. 여러가지 방법이 있지만 TDM같은 기술로 직접 연결한 것같은 품질을 보장한다. 
주로 본사 - 지사 연결에서 사용된다.

전용 회선을 가입자 - 전송기술 기반으로 분류하면 두가지로 분류된다.

- 음성 기능 기술 기반(저속)
64kbps 단위로 구분되어 사용된다. 작은 단위를 묶어 접속 속도를 높이는 방법으로 오랜기간 사용되었다. 전송 속도보다 신뢰성이 증요할 때 사용되어 왔지만, 이더넷 기반의 광 전송 기능이 발전해 사용 빈도가 줄고있다.
- 메트로 이더넷(고속)
보통 광케이블 기반의 이더넷을 사용한다. 가입자-통신사는 이더넷을 사용하고, ㅗㅇ신사 내부에선 다른 고속 기술을 사용한다.

* LLCF(Link Loss Carry Forward)
한쪽 링크가 다운되면 반대쪽 링크도 다운시키는 기능. 저속 회선은 2계층 프로토콜이 확인해주기 때문에 필요없다.

### 인터넷 전용 회선

인터넷 연결 회선에 대해 대역폭을 보장해주는 상품을 뜻한다. (이더넷이 대표적)

가입자 - 통신사업자 연결을 하고 이 연결을 다시 인터넷과 연결하는 구조. 인터넷 회선과 달리 연결 품질을 보장한다.

최근에는 광 접속 기술을 사용하기 때문에 인터넷 기술과 구분하기 어렵다.

### VPN(Virtual Private Network)

가상으로 연결한 것 같은 효과를 만들어주는 기술.

- 통신 사업자 VPN
전용선은 연결 거리가 늘어날수록 비용이 증가한다. (해외 연결 전용선은 매우 비싸다.)
전용선은 대역폭을 보장하지만, 항상 100% 사용하는게 아니면 낭비된다. 이를 해결하기 위해 통신사가 직접 가입자를 구분할 수 있는 VPN기술을 사용한다. (MPLS)

MPLS : 가입자가 하나의 망에 접속하므로 공용 회선을 함께 이용해 비용이 줄고, 거리의 영향을 받지 않고, 속도의 영향만 받는다.

- 가입자 VPN
일반적으로 사용되는 VPN. 전용선 또는 MPLS는 비용이 비싸기 때문에 일반 인터넷 VPN을 사용한다.

- DWDM (Dense Wavelength Division Multiplex)
장거리 통신에서 케이블  포설 비용이 비싸고, 관리가 어려운 문제를 극복하고자 개발되었다. 기존에는 하나의 광케이블에 하나의 통신만 가능했는데, 광케이블에 다른 파장의 빛을 통해 **여러 채널**을 만들어 전송할 수 있다.

* 기가인터넷에서 FTTP를 사용하고 방식에 따라 PTP, AON, PON으로 구분되는데 DWDM을 접목하여 사용자간 광회선을 공유하더라도 속도를 유지할 수 있다.

## 2.3 네트워크 구성 요소

### 네트워크 인터페이스 카드

컴퓨터를 네트워크에 연결하기 위한 장치.

랜카드와 같은 의미이며, 네트워크 카드, 네트워크 인터페이스 컨트롤러 라고도 불린다.
노트북과 데스크톱엔 보드에 장착되어 있지만, 더 높은 대역폭이 필요하면 랜카드를 추가하기도 한다.

주요 역할

- 직렬화 - 전기적 신호 ↔ 데이터  변환하는 역할.
- MAC 주소 - 패킷의 도착지 주소가 자신의 주소가 아니면 폐기한다.
- 흐름 제어 - 패킷 기반 네트워크는 하나의 채널만 이용한다. 이때 데이터 유실 방지를 위해 통신 중지 요청을 한다.

일부 랜카드는 L3 스위치 기능이 내장되어 가상화 서버끼리 연결하는 vSwitch 가속 기능도 제공된다. 이런 기능은 서버 가상화와 네트워크 장비 가상화를 하는 NFV에 사용된다.

* Multifunction 네트워크 인터페이스 카드
이더넷은 네트워크 전송기술뿐만 아니라 SAN,HPC에도 사용된다.

### 케이블과 커넥터

신뢰도 높은 통신의 경우 유선 통신이 사용된다.
케이블은 트위스티드 페어, 동축, 광 이렇게 3가지가 있는데 특성에 따른 용도가 있기 때문에 잘 확인하자

**이더넷 표준**

이더넷의 표준은 케이블, 인코더 등 여러가지로 나뉘지만, 현재는 3가지가 가장 많이 쓰인다

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/85796588/0e9f2b71-9bc5-4ea3-b02d-609f2f28b2e0)

앞 숫자는 속도를 나타낸다. 1000 = 1000Mbps

중간의 문자는 채널 종류를 뜻한다. (Base = 단일, Board = 다채널)

마지막 문자는 케이블 타입을 나타낸다.

**케이블 구성**

- 트랜시버 - 다양한 외부 신호를 컴퓨터 전기신호로 바꿔준다.
트랜시버가 내장된 고정 인터페이스 타입은 연결지점에 따라 기기를 변경해야 하지만, 내장이 아닌 경우 트랜시버만 갈아끼우면 된다.
- 케이블 본체 - 케이블 자체
- 커넥터 - 연결되는 부분

### 허브

케이블과 동일하게 1계층에서 동작하는 장비이다.

거리가 멀어질수록 전기신호가 줄어드는데, 이를 재생성해주고 여러대의 장비를 연결하는 목적으로 사용된다. 들어온 신호를 모든 포트로 내보내기 떄문에 네트워크 성능이 줄어들기도 하고, 무한 순환으로 인해 다양한 장애의 원이이 되어 현재는 잘 사용하지 않는다.

### 스위치

허브와 동일하게 여러 장비를 연결하고 통신을 중재한다. 2계층에서 동작하는 장비이다.

외부에서 볼때 허브와 동일한 역할을 하기 때문에 허브라고 불린다.

스위치는 허브의 역할과 통신을 중재하는 역할을 하는데, 허브와 달리 MAC주소를 파악하고 연결된 포트로만 신호를 전송한다.

허브와 다르게 양방향 통신이 가능하다.

### 라우터

3계층에서 먼 거리로 통신할 수 있는 프로토콜로 변환시키는 장비이다. 

원격지로 쓸데없는 패킷이 전송되지 않도록 프로드캐스트와 멀티캐스트를 제어하고 불분명한 주소와의 통신을 버린다. 그리고 정확한 방향으로 패킷이 전성되도록 최적의 경로로 포워딩한다.

* 브로드캐스트(Broadcast)

로컬 네트워크에 연결되어 있는 **모든 시스템**에게 프레임을 보내는 방식을 말한다. 수신 받는 시스템은 이 주소가 오면 패킷을 자신의 CPU로 전송하고 CPU가 패킷을 처리하는 방식이다. 트래픽이 증가하고, 패킷을 처리해야 하므로 성능에 저하가 생긴다. 
통신하고자 하는 시스템의 MAC 주소를 알지 못하는 경우, 네트워크에 있는 모든 시스템에게 알리는 경우, 라우터끼리 정보를 교환하거나 새로운 라우터를 찾는 경우 등에 이용 된다.

* 멀티캐스트(Multicast)

네트워크에 연결되어 있는 시스템 중 **일부**에게만 정보를 전송하는 것으로 특정 그룹에 속해 있는 시스템에게만 한 번에 정보를 전송할 수 있는 방법을 말한다. 멀티캐스트는 라우터가 멀티캐스트를 지원해야만 사용 가능하다.

송신자는 여러 수신자에게 한 번에 메시지가 전송되도록 하여 데이터의 중복 전송으로 인한 네트워크 자원 낭비를 최소화할 수 있게 된다.

유니캐스트와 다른 점은 패킷이다. 일반적으로 TCP/IP 상의 인터넷 응용 프로그램은 데이터의 송신자가 이를 수신할 수신자의 인터넷 주소를 전송 패킷의 헤더에 표시해 패킷을 전송한다. 그러나 멀티캐스트 전송을 위해서는 헤더에 수신자의 주소 대신 수신자들이 참여하고 있는 그룹 주소를 표시하여 패킷을 전송한다.

### 로드 밸런서

4계층에서 동작하는 장비이며, 애플리케이션에서 동작하는 로드 밸런서(ADC)는 7계층에 속한다. L4 스위치도 로드 밸런서의 한 종류이다. 

4계층 포트 주소를 확인할 수 있으며, IP를 변경할 수 있다. 서비스 헬스체크 및 대용량 세션 처리 기능도 있다.
로드 밸런서는 웹에서 가장 많이 사용되는데, 서버를 증설할 때 로드 밸런서를 서버 앞에 두고 여러대의 서버에 분산시킨다. 대표 IP를 로드 밸런서가 갖고 각 서버의 IP로 변경해 보내준다.

### 보안 장비

일반적으로 알려진 보안장비는 방화벽이며 4계층에서 동작한다.

방화벽을 통과하는 패킷의 3, 4계층 정보를 확인하고 패킷 정책과 비교해 포워딩 한다.

### 모뎀과 공유기

공유기는 2계층의 스위치, 3계층의 라우터, 4계층의 NAT 그리고 간단한 방화벽 기능을 모아놓은 장비이다. 공유기 내부는 스위치, 무선, 라우터 회로로 나뉘어 스위치와 무선 AP, 라우터로 구분된다.

공유기의 LAN포트와 WAN포트는 모두 일반 이더넷이어서 100m이상 데이터를 보낼 수 없어서 모뎀이 별도로 필요하다. 통신사 네트워크 종류와 기술에 따라서 사용되는 모뎀이 다르다. 

모뎀은 짧은 거리를 통신하는 거리와 먼 거리를 통신하는 기술이 다른데 이를 변환해주는 장비이다.
