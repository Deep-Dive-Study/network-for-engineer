# 2장 네트워크 연결과 구성 요소

- 최근에는 대부분 `'TCP/IP'` 기반의 기술이 활용되고 있어 단순화 되어 가고 있음

- 하지만, 아직도 용도와 필요 네트워크 속도에 따라 다양한 기술 요소가 존재함 

## 2.1 네트워크 연결 구분

- 네트워크 `규모`와 `관리 범위`에 따른 분류

- 현재는 이더넷으로 통합되면서 전송 기술을 분류하는 것은 무의미하고 관리 범위에 따른 분류로 보면 됨

### 2.1.1 LAN(Local Area Network)

- 사용자 내부 네트워크

  - 홈 네트워크, 사무실용 네트워크
  
  - 직접 구축한 선로로 동작시키는 네트워크
 
- 대부분 이더넷 기반 전송 기술 사용

- 비교적 간단한 장비로 연결된 네트워크 (`스위치` - 2계층 장비)

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/ec39fb55-08e6-442b-81bb-c144af29e95c)

### 2.1.2 WAN(Wide Area Network)

- 멀리 떨어진 LAN을 서로 연결해주는 네트워크

- 대부분 통신사업자로부터 회선을 임대해 사용

  - 사용 계약에 따라 비용 부과

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/dc013647-4d7a-4aa0-848e-3531d742c4c7)

참고하면 좋은 영상 :  https://youtu.be/oFKYzp6gGfc

### MAN(Metro Area Network)

- 한 도시 정도를 연결하고 관리하는 네트워크(수 ~ 수십 km 정도)

- 통신사가 이미 갖고 있는 인프라 기반으로 네트워크 구축 시 WAN, 자체 인프라를 통해 네트워크 구축 시 MAN으로 구분하기도 함

## 2.2 네트워크 회선

- 이전에는 WAN과LAN에서 사용하는 기술이 달라지만 최근에는 이더넷이 사용됨

- 이더넷 외에는 `음성 회선 기반의 저속 회선`, `통신 사업자 간의 고속 통신`, `가입자를 구분하고 식별하기 위한 기술`, 등이 있음

### 2.2.1 인터넷 회선

- 인터넷 접속을 위해 통신사업자와 연결하는 회선
  
  - 주로 일반 가정에서 사용
  
  - 인터넷 전용 회선과 다름

- 전송 선로 공유 기능 사용(일반 인터넷 회선의 속도는 전송 가능한 최대 속도, 속도 보장 X)

- 기존 전화선 사용, 특정 구간부터 다른 사용자와 공유

- 종류

  - 광랜(이더넷, 기가 ~ 100Mbps)
  
  - FTTP(기가 ~ 100Mbps)
  
  - 동축 케이블 인터넷(수백 ~ 수십Mbps)
  
  - xDSL(ADSL, VDSL, 수십 ~ 수Mbps)

### 2.2.2 전용 회선

- 가입자와 통신사업자 간에 대역폭을 보장하는 서비스
  
  - 가입자와 통신사업자 간에 전용 케이블로 연결
  
  - 통신사업자 내부에서 TDM(시분할 다중화, Time Division Multiplexing) 같은 기술로 마치 직접 연결한 것처럼 통신 품질 보장

- **`음성 전송 기술 기반(저속)`**

    - 64Kbps 단위로 구분
    - 작은 기본 단위를 묶어 회선 접속 속도를 높이는 방법
    - 보통 높은 속도가 필요하지 않을 때나 높은 신뢰성이 필요할 때 사용(사용 빈도가 줄고 있음 -> 이더넷으로 대체)
    - 결재 승인과 같은 전문(Clear Text) 전송을 위한 VAN(Value Added Network)사나 대외 연결 시 사용
    - 원격지 전송 기술로 변환할 수 있는 라우터 필요(모뎀?)

- **`메트로 이더넷(고속)`**

    - 광케이블 기반의 이더넷
    - 개별 가입자를 묶어 통신할 수 있는 다른 고속 통신 기술 사용
    - 여러 가입자를 구분하고 가입자 트래픽을 고속으로 전송

#### LLCF(Link Loss Carry Forward)

- 한쪽 링크가 다운되면 이를 감지해 반대쪽 링크도 다운시키는 기능

- 저속 회선은 2계층 프로토콜 통신 상태를 확인하는 기능 보유 → LLCF 설정 불필요

### 2.2.3 인터넷 전용 회선

- 인터넷 연결 회선에 대한 통신 대역폭을 보장해주는 상품

- 가입자가 통신사업자와 연결, 이 연결이 다시 인터넷과 연결되는 구조

- 통신사업자와 가입자 간의 연결 품질 보장(다른 가입자와 경쟁 X)

- 이더넷 회선 기술 사용

### 2.2.4 VPN(Virtual Private Network)

- **가상으로 직접 연결한 것 같은 효과가 나도록 만들어주는 네트워크 기술**

- 가입자 입장과 통신사업자 입장에서 서로 별도로 발전

#### 2.2.4.1 통신사업자 VPN

- 비용 낭비를 줄이고 먼 거리와 연결하더라도 비용을 줄이기 위해 통신사업자가 직접 가입자를 구분할 수 있는 VPN 기술 사용

  - 먼거리의 전용선은 거리에 따라 가격 증가 => 공용선에서 가입자를 구분해서 전용선 사용하는 것처럼 만들어서 비용을 낮춤   

- `MPLS VPN` : 여러 가입자가 하나의 MPLS 망에 접속, 가입자 구분 가능

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/ac5ea2f0-9325-4280-93de-5add49a3ab2d)


#### 2.2.4.2 가입자 VPN

- 일반 인터넷망을 이용해 사용자가 직접 가상 전용 네트워크 구성 가능

### 2.2.5 DWDM(Dense Wavelength Division Multiplex, 파장 분할 다중화)

- 먼 거리를 통신할 때 케이블 포설 비용이 매우 많이 들고 관리가 어려운 문제를 극복

- 하나의 광케이블에 다른 파장의 빛을 통해 여러 채널을 만드는 동시에 많은 데이터 전송 가능
  
  - 광 회선을 공유하더라도 가입자마다 별도의 채널을 이용해 구분함으로 인터넷 속도 유지 가능 

- 기가 인터넷은 FTTH 사용
  
  - 구축 방식에 따라 `PTP`, `AON`, `PON` 형태로 구분됨

    - PTP(Point-to-Point) : 가입자와 통신사업자 간에 케이블 직접 포설

    - AON(Active Optical Network) : 광신호 분리장비에 전기가 필요한 스위치와 같은 장비 사용

    - PON : 전기 인입 없이 광신호 분리

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/b8f6797d-dd6a-4c08-8827-920d8557d68c)


## 2.3 네트워크 구성 요소

- 네트워크를 구축하고 사용하는데 필요한 구성 요소들

### 2.3.1 네트워크 인터페이스 카드(NIC)

- 랜 카드, 네트워크 카드(Network Card), 네트워크 인터페이스 컨트롤러(Network Interface Controller)

- **`컴퓨터를 네트워크에 연결하기 위한 하드웨어 장치`**

- 주요 역할

  - `직렬화(Serialization)` : 전기적 신호를 데이터 신호 형태로 또는 데이터 신호 형태를 전기적 신호 형태로 변환

  - `MAC 주소` : 받은 패킷의 도착지 주소가 자신의 MAC 주소가 아니면 폐기, 자신의 주소가 맞으면 시스템 내부에서 처리할 수 있도록 전달

  - `흐름 제어(Flow Control)` : 데이터 유실 방지를 위해 데이터를 받지 못할 때는 상대방에게 통신 중지 요청 가능

#### 고대역폭, 이더넷 스위치 기능을 내장한 네트워크 인터페이스 카드

  - 패킷 생성과 전송을 CPU 도움 없이 독자적으로 처리

  - NFV(Network Function Virtualization, 네트워크 기능 가상화)에 사용

#### Multifunction 네트워크 인터페이스 카드

  - 스토리지-서버 연결, 이더넷-스토리지 연결, 서버-서버 간 연결

### 2.3.2 케이블과 커넥터

- 신뢰도 높은 통신이 필요한 경우에는 아직도 유선이 사용됨

- 종류 : 트위스티드 페어(Twisted Pair), 동축(Coaxial), 광(Fiber-optic)

#### 2.3.2.1 이더넷 네트워크 표준

- 현재 가장 많이 사용되는 네트워크 기술

- `기가 비트 이더넷`(일반 PC), `10기가비트 이더넷`(데이터 센터 서버) 사용
  
  - 스위치에서 상위 스위치와 연결을 위해 `업링크 대역폭`을 확보해야함
    
    - 업링크 대역폭 :  

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/76bc4c84-9946-44cb-9a49-4a5f03c98f3f)

- 대중적으로 많이 사용하는 표준

  - 1000BASE-T/10GBASE-T : 트위스티드 페어 케이블을 이용, 기가 이더넷 표준

  - 1000BASE-SX/10GBASE-SR : 멀티모드 광케이블 사용, 비교적 짧은 거리를 보낼 수 있는 이더넷 표준

  - 1000BASE-LX/10GBASE-LR : 싱글모드 광케이블 사용, 비교적 긴 거리를 보낼 수 있는 이더넷 표준


![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/14068fc9-0692-4c02-a027-5749c74fc08a)



- 숫자(속도), 중간 문자(채널 종류, BASE 단일채널, BROAD 다채널), 마지막 문자(케이블 타입, T 트위스티드 페어 케이블)
  
  - 마지막 문자에 의해 광신호, 트랜시버의 종류가 달라짐 

#### 2.3.2.2 케이블, 커넥터 구조

- 케이블은 본체, 커넥터, 트랜시버와 같은 여러 요소로 나뉨 
  
  - 본체 종류(트위스티드 페어, 동축, 광)에 따라 커넥터와 트랜시버가 달라짐

- `케이블 본체`

  - 트위스티드 페어 케이블
    
    - 가장 흔히 사용하는 케이블 
    
    - RJ-45 커넥터 이용, 케이블 본체와 함께 연결(분리 X)
    
    - 카테고리 단위로 케이블 등급을 나눔 
    
    - 쉴드를 장착한 STP/FTP 케이블, 쉴드가 없는 UTP 케이블
        
        - STP(Shieled Twisted Pair) : 그물 형태의 쉴드
        
        - FTP(Foiled Twisted Pair) : 포일 형태의 쉴드
        
        - UTP(Unshielded Twisted Pair) : 쉴드 미포함
    
![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/9d16b4c5-1517-4ffe-8985-3a9b5dd8bfe1)

    
  - 동축 케이블
    
    - 고가, 케이블 TV나 인터넷 연결을 위해 사용 
    
    - DAC(Direct Attach Copper Cable) 사용
    
  - 광케이블
    
    - 신뢰도가 높고 더 먼거리까지 통신 가능
    
    - 싱글모드 : 먼 거리 통신을 지원, 매우 가는 케이블, 신호를 보내는 광원으로 레이저 사용, 노란색 케이블
    
    - 멀티모드 : 싱글보드에 비해 비교적 굵은 케이블, 광원으로 LED 사용, 주황색, 하늘색 케이블

- 커넥터

    - 케이블의 끝부분, 네트워크 장비나 네트워크 카드에 연결되는 부분
    
    - RJ-45, SFP, ST, SC, FC, LC
    
- 트랜시버

    - 다양한 외부 신호를 컴퓨터 내부의 전기 신호로 바꿈
    
    - 트랜시버가 없던 시절에는 케이블이 변경되면 네트워크 장비, 네트워크 카드도 함께 변경되었음
      
      - 트랜시버를 통해 서로 다양한 네트워크 표준을 혼용해서 사용

##### 다양한 케이블의 종류

- 일체형 케이블
  
  - 트랜시버와 케이블이 하나로 연결됨
  
  - 스위치와 서버 간의 짧은 거리를 연결할때 주로 사용 
  
  - DAC(Direct Attach Copper Cable) : 동축 케이블

  - AOC(Active Optical Cable) : 광케이블

- 브레이크아웃(Break-Out) 케이블 : 하나의 커넥터에서 여러 개의 케이블로 분할

- MPO(Multiple-Fiber Push-On/Pull-Off) : 고밀도 케이블
      
### 2.3.3 허브

- 1계층 장비

- 거리가 멀어질수록 줄어드는 전기 신호 재생성

- 여러 대의 장비를 연결할 목적으로 사용

- 단순히 들어온 신호를 모든 포트로 내보냄
  
  - 네트워크에 접속된 모든 단말이 경쟁하게 됨 -> 비효율, 성능 저하, 장애 원인
  
  - 최근에는 사용 X  

### 2.3.4 스위치

- 2계층 장비

- 여러 장비를 연결하고 통신을 중재하는 역할
  
  - LAN에서 사용됨 

- `목적지 MAC 주소의 위치 파악` , `목적지가 연결된 포트로만 전기 신호 전달`
  
  - 송수신을 동시에 할 수 있음 

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/fa9e2242-e20b-4f60-a028-8f9be0ce39a8)


### 2.3.5. 라우터

- 3계층 장비

- 먼거리로 통신할 수 있는 프로토콜로 변환

  - LAN과 LAN을 이어주는 역할
  
  - L3 스위치, 공유기 

- `브로드캐스트`와 `멀티캐스트`를 컨트롤
  
  - `브로드캐스트`: 데이터를 네트워크에 연결된 모든 장치들에게 전송하는 방식
  
  - `멀티캐스트`: 데이터를 특정 그룹의 여러 목적지들에게 전송하는 방식
  
  - `유니캐스트`: 데이터를 네트워크상의 특정 하나의 목적지에게만 전송하는 방식
  
  - `애니캐스트`: 여러 대의 장치가 같은 IP 주소를 공유하며, 송신자가 데이터를 해당 IP 주소로 전송할 때, 네트워크는 가장 가까운 또는 최적의 장치로 데이터를 전송하는 방식

- 불분명한 주소로 통신을 시도할 경우, 이를 버림

- 정확한 방향으로 패킷이 전송되도록 경로 지정, 최적의 경로로 패킷 포워딩(`라우팅 테이블`)

![image](https://github.com/Deep-Dive-Study/network-for-engineer/assets/99165624/3ffb0782-7387-4f7f-9aa7-74886d14a23e)


### 2.3.6. 로드 밸런서

- 4계층 장비
  
  - 어플리케이션 레이어에서 동작하는 로드밸런서도 있으나 별도로 ADC(Application Delivery Controller)라고 부름
  
  - `L4 스위치` : 스위치처럼 여러 포트를 가지고 있으면서 로드 밸런서 역할까지 하는 장비
  
- 4계층 포트 주소를 확인하는 동시에 IP 주소 변경 가능
  
  - 웹에서 서버 증설시에 많이 사용됨
    
    - 로드밸런서가 대표 IP를 갖고 각 웹서버로 요청을 배분해줌 
  
  - 서비스 헬스 체크 기능, 대용량 세션 처리 기능 제공

### 2.3.7 보안 장비(방화벽/IPS)

- 정확한 정보 전달보다 **정보를 잘 제어하고 공격을 방어하는 것** 에 초점
  
- 방어 목적과 보안 장비가 설치되는 위치에 따라 다양한 보안 장비 사용
  
  - `방화벽`
    
    - 4계층에서 동작  
    
    - 방화벽을 통과하는 패킷의 3, 4계층 정보 확인
    
    - 패킷을 정책과 비교해 버리거나 포워딩 
  
### 2.3.8 기타(모뎀/공유기, 등)

- **`공유기`** : 2계층 스위치, 3계층 라우터, 4계층 NAT와 간단한 방화벽 기능까지 한곳에 모아놓은 장비 
  
  - 참고하면 좋은 영상: https://www.youtube.com/watch?v=7BvzxbG4y3Y

- `모뎀` : 짧은거리를 통신하는 기술과 먼 거리를 통신할 수 있는 기술을 변환해 주는 장비
